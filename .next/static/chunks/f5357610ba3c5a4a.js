(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32003,e=>{"use strict";var a=e.i(95187),t=(0,a.createServerReference)("40dbeeb162e059ce773ea6d9a6027e012cc9ed5594",a.callServer,void 0,a.findSourceMapURL,"getData");e.s(["getData",()=>t])},95187,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={callServer:function(){return s.callServer},createServerReference:function(){return c.createServerReference},findSourceMapURL:function(){return i.findSourceMapURL}};for(var l in r)Object.defineProperty(t,l,{enumerable:!0,get:r[l]});let s=e.r(32120),i=e.r(92245),c=e.r(35326)},75157,e=>{"use strict";function a(e){return/^[0-9]+$/.test(e.toString())}function t(e){return/^[a-zA-Z0-9!@#$%^&*()_\-+=\[\]{}|\\:;"'<>,.?/]+$/.test(e)}function r(e){return null===e?"â€”":"boolean"==typeof e?e?"SÃ­":"No":"object"==typeof e?JSON.stringify(e):String(e)}e.s(["formatDate",0,e=>e?new Date(e).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric"}):"-","formatValue",()=>r,"getLastDocument",0,e=>Array.isArray(e)&&0!==e.length?e.reduce((e,a)=>a.version>e.version?a:e):null,"validatePassword",()=>t,"validateUser",()=>a])},74793,48686,62259,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(69620);function l({open:e,onClose:l,schema:s,initialData:i,onSubmit:c}){let[o,n]=(0,t.useState)({}),d=!!i;(0,t.useEffect)(()=>{if(d)n(i);else{let e={};s.fields.forEach(a=>e[a.name]=""),n(e)}},[i,s.fields,d]);let u=(e,a)=>{n({...o,[e]:a})},m=async e=>{e.preventDefault(),await c(o,d),l()};return e?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md p-6 relative shadow-xl",children:[(0,a.jsx)("button",{onClick:l,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,a.jsx)(r.IoClose,{size:22})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-6",children:d?s.titleEdit:s.titleCreate}),(0,a.jsxs)("form",{className:"space-y-4 max-h-[65vh] overflow-y-auto pr-2",onSubmit:m,children:[s.fields.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:e.label}),"select"===e.type?(0,a.jsxs)("select",{value:o[e.name]??"",disabled:d&&e.disabledOnEdit,onChange:a=>u(e.name,a.target.value),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-(--primary-color)",children:[(0,a.jsx)("option",{value:"",children:"Seleccione"}),e.options?.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}):"file"===e.type?(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("input",{type:"file",multiple:!0,onChange:a=>{let t=a.target.files?Array.from(a.target.files):[];u(e.name,t)},className:"w-full text-sm text-gray-500 border rounded-lg p-2   file:mr-4 file:py-1 file:px-3 file:rounded-md   file:border-0 file:text-sm file:font-semibold   file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),Array.isArray(o[e.name])&&o[e.name].length>0&&(0,a.jsx)("ul",{className:"mt-2 space-y-1",children:o[e.name].map((e,t)=>(0,a.jsxs)("li",{className:"text-xs text-blue-600 flex items-center gap-1",children:[(0,a.jsxs)("span",{className:"truncate max-w-[200px]",children:["ðŸ“„ ",e.name]}),(0,a.jsxs)("span",{className:"text-gray-400",children:["(",(e.size/1024).toFixed(1)," KB)"]})]},t))})]}):(0,a.jsx)("input",{type:e.type,value:o[e.name]??"",disabled:d&&e.disabledOnEdit,onChange:a=>u(e.name,a.target.value),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-(--primary-color)"})]},e.name)),(0,a.jsx)("button",{className:"w-full mt-4 bg-(--primary-color) text-white py-2 rounded-lg font-medium hover:opacity-90",children:d?s.submitEditLabel:s.submitCreateLabel})]})]})}):null}e.s(["GenericCrudModal",()=>l],74793);var s=e.i(95187),i=(0,s.createServerReference)("40df1140757c877a0cf5908cbf3501a791abd968f4",s.callServer,void 0,s.findSourceMapURL,"insertDataStudent"),c=(0,s.createServerReference)("4023375bd8a23baae2dbdd008432443971914172c5",s.callServer,void 0,s.findSourceMapURL,"updateDataProfessor"),o=(0,s.createServerReference)("603f537fdc2a97a1500ac983e263e983cb53542d1f",s.callServer,void 0,s.findSourceMapURL,"insertData"),n=(0,s.createServerReference)("789356f77ab1b0865bf38f9fb0beb43681a836e7c7",s.callServer,void 0,s.findSourceMapURL,"updateData"),d=e.i(32003),u=(0,s.createServerReference)("402620dffcd3c85786e3b09cbf5845ddde39a9ce98",s.callServer,void 0,s.findSourceMapURL,"createProject"),m=(0,s.createServerReference)("40125bccffa017b42e903c0dcaad09bf605e682708",s.callServer,void 0,s.findSourceMapURL,"updatePhaseProject"),b=(0,s.createServerReference)("404c6d4fcb17c8ca1923809c46ed86bb2511a6522c",s.callServer,void 0,s.findSourceMapURL,"updatePhaseProjectDate"),p=(0,s.createServerReference)("60095e3d4e4173083ded4e8a12e6c7ddd48913e0d1",s.callServer,void 0,s.findSourceMapURL,"updateProject"),f=(0,s.createServerReference)("40bc103f492b054c2a0e26064e9bcd8274593ac6c1",s.callServer,void 0,s.findSourceMapURL,"updateUserStatus"),h=(0,s.createServerReference)("7899d074825ab2fdb144caec3875c5e99aea2a7fa3",s.callServer,void 0,s.findSourceMapURL,"getCustomData");e.s(["getCustomData",()=>h],48686),e.s(["tableConfig",0,{users:{schema:{titleCreate:"Crear usuario",titleEdit:"Editar usuario",submitCreateLabel:"Crear usuario",submitEditLabel:"Actualizar usuario",fields:[{name:"name",label:"Nombre *",type:"text"},{name:"id_document",label:"Documento *",type:"text"},{name:"id_role",label:"Rol *",type:"select"},{name:"email",label:"Email *",type:"email"},{name:"password",label:"ContraseÃ±a *",type:"password"},{name:"program",label:"Programa *",type:"select"},{name:"id_status",label:"Estado *",type:"select"},{name:"id_school",label:"Escuela *",type:"select"}]},createAction:async(e,a)=>{o(e,a)},updateAction:async(e,a,t)=>{n(e,a,t,"id_user")},loadRelations:async()=>({roles:await (0,d.getData)("roles"),programs:await (0,d.getData)("programs"),status:await (0,d.getData)("status_user"),schools:await (0,d.getData)("schools")})},schools:{schema:{titleCreate:"Crear escuela",titleEdit:"Editar escuela",submitCreateLabel:"Crear",submitEditLabel:"Actualizar",fields:[{name:"name",label:"Nombre *",type:"text"}]},createAction:async(e,a)=>{o(e,a)},updateAction:async(e,a,t)=>{n(e,a,t,"id_school")}},programs:{schema:{titleCreate:"Crear programa",titleEdit:"Editar programa",submitCreateLabel:"Crear",submitEditLabel:"Actualizar",fields:[{name:"name",label:"Nombre *",type:"text"},{name:"id_school",label:"Escuela *",type:"select"}]},createAction:async(e,a)=>{o(e,a)},updateAction:async(e,a,t)=>{n(e,a,t,"id_program")},loadRelations:async()=>({schools:await (0,d.getData)("schools")})},Project:{schema:{titleCreate:"Crear proyecto",titleEdit:"Editar proyecto",submitCreateLabel:"Crear proyecto",submitEditLabel:"Actualizar proyecto",fields:[{name:"title",label:"Nombre *",type:"text"},{name:"description",label:"DescripciÃ³n *",type:"text"},{name:"is_best",label:"Gran proyecto",type:"text"},{name:"id_program",label:"Programa *",type:"select"},{name:"id_school",label:"Escuela *",type:"select"},{name:"id_mode",label:"tipo de proyecto *",type:"select"},{name:"initial_date",label:"Fecha inicial *",type:"date"},{name:"id_professors *",label:"Profesores",type:"multiselect"},{name:"id_students *",label:"Estudiantes",type:"multiselect"}]},createAction:async e=>{u(e)},updateAction:async(e,a)=>{p(e,a)},loadRelations:async e=>({schools:await h("schools","*",e),programs:await h("programs","id_program, name",e),mode:await h("modes"),students:await h("users","id_user, name",e,4),professors:await h("users","id_user, name",e,3)})},usersManager:{schema:{titleCreate:"Actualizar estatus del usuario",titleEdit:"Actualizar estado del estudiante",submitCreateLabel:"Crear",submitEditLabel:"Actualizar",fields:[{name:"id_status",label:"Estatus",type:"select"}]},updateAction:async e=>{f(e)},loadRelations:async()=>({status:await h("status_user")})},newPhase:{schema:{titleCreate:"Actualizar fase del proyecto",titleEdit:"Actualizar fase del proyecto",submitCreateLabel:"Actualizar proyecto",submitEditLabel:"Actualizar proyecto",fields:[{name:"id_work *",label:"titulo del proyecto",type:"select"},{name:"id_phase *",label:"Fase",type:"select"},{name:"initial_date *",label:"Fecha inicial",type:"date"},{name:"id_professors *",label:"Profesores",type:"multiselect"},{name:"id_students *",label:"Estudiantes",type:"multiselect"}]},createAction:async e=>{m(e)},loadRelations:async e=>({phase:await h("phase"),works:await h("works","id_work, title",e),students:await h("users","id_user, name",e,4),professors:await h("users","id_user, name",e,3)})},datePhase:{schema:{titleCreate:"Actualizar fecha fin",titleEdit:"Actualizar fecha fin",submitCreateLabel:"Actualizar fecha",submitEditLabel:"Actualizar",fields:[{name:"id_work *",label:"titulo del proyecto",type:"select"},{name:"id_phase *",label:"Fase del proyecto",type:"select"},{name:"end_date *",label:"Fin de la fase",type:"date"}]},createAction:async e=>{b(e)},loadRelations:async e=>({phase:await h("phase"),works:await h("works","id_work, title",e)})},studentAdvance:{schema:{titleCreate:"Nuevo avance",titleEdit:"Editar avance",submitCreateLabel:"Subir avance",submitEditLabel:"Actualizar",fields:[{name:"file",label:"Archivo word o excel *",type:"file"},{name:"version",label:"version *",type:"text"},{name:"description",label:"DescripciÃ³n",type:"text"}]},createAction:async e=>{await i(e)}},professorFeedback:{schema:{titleCreate:"Nuevo avance",titleEdit:"Editar avance",submitCreateLabel:"Subir avance",submitEditLabel:"Actualizar",fields:[{name:"file",label:"Archivo word o excel *",type:"file"},{name:"professor_comments",label:"Comentarios del profesor",type:"text"}]},updateAction:async e=>{await c(e)}}}],62259)},81400,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(32003),l=e.i(74793),s=e.i(62259),i=e.i(75157);function c({table:e,title:i,name:c}){let[n,d]=(0,t.useState)([]),[u,m]=(0,t.useState)(!1),[b,p]=(0,t.useState)(!1),[f,h]=(0,t.useState)(null),[y,x]=(0,t.useState)(null);async function v(){m(!0),d(await (0,r.getData)(e)),m(!1)}async function g(){let a=s.tableConfig[e];if(!a)return;let t=structuredClone(a.schema);if(a.loadRelations){let e=await a.loadRelations();t.fields=t.fields.map(a=>("id_school"===a.name&&(a.options=e.schools.map(e=>({value:e.id_school,label:e.name}))),"id_role"===a.name&&(a.options=e.roles.map(e=>({value:e.id_role,label:e.name}))),"program"===a.name&&(a.options=e.programs.map(e=>({value:e.id_program,label:e.name}))),"id_status"===a.name&&(a.options=e.status.map(e=>({value:e.id_status,label:e.name}))),a))}x(t)}(0,t.useEffect)(()=>{v(),g()},[e]);let w=async(a,t)=>{let r=s.tableConfig[e];if(console.log(a),t){let[t,l]=Object.entries(a)[0],{[t]:s,...i}=a;console.log(l,i),await r.updateAction(e,i,l)}else await r.createAction(e,a);await v()};return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-7",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"Dashboard Admin"}),(0,a.jsx)("div",{className:"flex gap-4",children:(0,a.jsxs)("button",{onClick:()=>{h(null),p(!0)},className:" w-full py-2 px-3 rounded-xl bg-(--secondary-color) text-white font-semibold hover:bg-(--secondary-color)/90 transition",children:["Crear ",c]})})]}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border p-4 md:p-6",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("div",{className:"border-b",children:(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:(0,a.jsx)("span",{className:"flex-shrink-0 rounded-t-lg px-4 py-2 text-sm font-medium transition text-gray-500 hover:text-gray-700 hover:bg-gray-100",children:i})})}),(0,a.jsx)("div",{className:"relative h-[60vh] md:h-[65vh]",children:u?(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Cargando..."}):(0,a.jsx)(o,{data:n,onEdit:e=>{h(e),p(!0)}})})]})}),y&&(0,a.jsx)(l.GenericCrudModal,{open:b,onClose:()=>p(!1),schema:y,initialData:f,onSubmit:w})]})}function o({data:e,onEdit:t}){if(!e?.length)return(0,a.jsx)("div",{className:"text-center text-gray-500 py-10",children:"No hay datos para mostrar"});let r=Object.keys(e[0]);return(0,a.jsx)("div",{className:"h-full overflow-auto rounded-xl border",children:(0,a.jsxs)("table",{className:"w-full text-sm border-collapse",children:[(0,a.jsx)("thead",{className:"sticky top-0 bg-gray-100",children:(0,a.jsxs)("tr",{children:[r.map(e=>(0,a.jsx)("th",{className:"px-4 py-3 border-b text-left font-semibold text-gray-700 whitespace-nowrap",children:e.replaceAll("_"," ")},e)),(0,a.jsx)("th",{className:"px-4 py-3 border-b text-left font-semibold text-gray-700 whitespace-nowrap",children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:e.map((e,l)=>(0,a.jsxs)("tr",{className:"odd:bg-white even:bg-gray-50 hover:bg-blue-50 transition",children:[r.map(t=>(0,a.jsx)("td",{className:"px-4 py-2 border-b text-gray-700 whitespace-nowrap",children:(0,i.formatValue)(e[t])},t)),(0,a.jsx)("td",{className:"px-4 py-2 border-b whitespace-nowrap",children:(0,a.jsx)("button",{className:"px-3 py-1 rounded-md text-sm font-medium   text-blue-600 hover:text-white   hover:bg-blue-600 transition border border-blue-600",onClick:()=>{t(e)},children:"Editar"})})]},l))})]})})}e.s(["default",()=>c])}]);