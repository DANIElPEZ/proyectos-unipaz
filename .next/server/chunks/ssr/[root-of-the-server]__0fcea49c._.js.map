{"version":3,"sources":["../../../../src/lib/actions/admin/data%3A6e44c2%20%3Ctext/javascript%3E","../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts","../../../../src/lib/utils.ts","../../../../src/components/ui/data-modal.tsx","../../../../src/lib/definitions/schemas.ts","../../../../src/lib/actions/student/data%3A1a3c66%20%3Ctext/javascript%3E","../../../../src/lib/actions/professor/data%3A7396a7%20%3Ctext/javascript%3E","../../../../src/lib/actions/admin/data%3A87d6ca%20%3Ctext/javascript%3E","../../../../src/lib/actions/admin/data%3A90bf8e%20%3Ctext/javascript%3E","../../../../src/lib/definitions/table-config.ts","../../../../src/lib/actions/manager/data%3Ae77030%20%3Ctext/javascript%3E","../../../../src/lib/actions/manager/data%3Ab2c3e2%20%3Ctext/javascript%3E","../../../../src/lib/actions/manager/data%3Aec5a36%20%3Ctext/javascript%3E","../../../../src/lib/actions/manager/data%3A23e2a9%20%3Ctext/javascript%3E","../../../../src/lib/actions/manager/data%3A757d1e%20%3Ctext/javascript%3E","../../../../src/lib/actions/manager/data%3Ab5e521%20%3Ctext/javascript%3E","../../../../src/components/ui/professor/edit-data.tsx","../../../../src/lib/actions/professor/data%3Afe7f10%20%3Ctext/javascript%3E","../../../../src/lib/actions/professor/data%3A11b885%20%3Ctext/javascript%3E"],"sourcesContent":["/* __next_internal_action_entry_do_not_use__ [{\"40dbeeb162e059ce773ea6d9a6027e012cc9ed5594\":\"getData\"},\"src/lib/actions/admin/action.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var getData=/*#__PURE__*/createServerReference(\"40dbeeb162e059ce773ea6d9a6027e012cc9ed5594\",callServer,void 0,findSourceMapURL,\"getData\");","// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n","export function validateUser(user: number): boolean {\r\n  return /^[0-9]+$/.test(user.toString());\r\n}\r\n\r\nexport function validatePassword(password: string): boolean {\r\n  return /^[a-zA-Z0-9!@#$%^&*()_\\-+=\\[\\]{}|\\\\:;\"'<>,.?/]+$/.test(password);\r\n}\r\n\r\nexport function formatValue(value: any) {\r\n  if (value === null) return \"‚Äî\";\r\n  if (typeof value === \"boolean\") return value ? \"S√≠\" : \"No\";\r\n  if (typeof value === \"object\") return JSON.stringify(value);\r\n  return String(value);\r\n}\r\n\r\nexport const getLastDocument = (docs: any[]) => {\r\n  if (!Array.isArray(docs) || docs.length === 0) return null;\r\n  return docs.reduce((latest, doc) =>\r\n    doc.version > latest.version ? doc : latest,\r\n  );\r\n};\r\n\r\nexport const formatDate = (date?: string) => {\r\n  if (!date) return \"-\";\r\n  return new Date(date).toLocaleDateString(\"es-CO\", {\r\n    year: \"numeric\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n  });\r\n};","\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { IoClose } from \"react-icons/io5\";\r\nimport { ModalSchema } from \"@/src/lib/definitions/schemas\";\r\n\r\ninterface Props {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  schema: ModalSchema;\r\n  initialData?: any | null;\r\n  onSubmit: (data: any, isEdit: boolean) => Promise<void>;\r\n}\r\n\r\nexport function GenericCrudModal({\r\n  open,\r\n  onClose,\r\n  schema,\r\n  initialData,\r\n  onSubmit,\r\n}: Props) {\r\n  const [form, setForm] = useState<any>({});\r\n\r\n  const isEdit = Boolean(initialData);\r\n\r\n  useEffect(() => {\r\n    if (isEdit) setForm(initialData);\r\n    else {\r\n      const empty: any = {};\r\n      schema.fields.forEach((f) => (empty[f.name] = \"\"));\r\n      setForm(empty);\r\n    }\r\n  }, [initialData, schema.fields, isEdit]);\r\n\r\n  const handleChange = (name: string, value: any) => {\r\n    setForm({ ...form, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    await onSubmit(form, isEdit);\r\n    onClose();\r\n  };\r\n\r\n  if (!open) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm\">\r\n      <div className=\"bg-white rounded-2xl w-full max-w-md p-6 relative shadow-xl\">\r\n        <button\r\n          onClick={onClose}\r\n          className=\"absolute top-4 right-4 text-gray-500 hover:text-gray-700\"\r\n        >\r\n          <IoClose size={22} />\r\n        </button>\r\n\r\n        <h3 className=\"text-xl font-semibold text-gray-800 mb-6\">\r\n          {isEdit ? schema.titleEdit : schema.titleCreate}\r\n        </h3>\r\n\r\n        <form\r\n          className=\"space-y-4 max-h-[65vh] overflow-y-auto pr-2\"\r\n          onSubmit={handleSubmit}\r\n        >\r\n          {schema.fields.map((field) => (\r\n            <div key={field.name}>\r\n              <label className=\"text-sm text-gray-600\">{field.label}</label>\r\n\r\n              {field.type === \"select\" ? (\r\n                <select\r\n                  value={form[field.name] ?? \"\"}\r\n                  disabled={isEdit && field.disabledOnEdit}\r\n                  onChange={(e) => handleChange(field.name, e.target.value)}\r\n                  className=\"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-(--primary-color)\"\r\n                >\r\n                  <option value=\"\">Seleccione</option>\r\n                  {field.options?.map((opt) => (\r\n                    <option key={opt.value} value={opt.value}>\r\n                      {opt.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              ) : field.type === \"file\" ? (\r\n                <div className=\"mt-1\">\r\n                  <input\r\n                    type=\"file\"\r\n                    multiple\r\n                    onChange={(e) => {\r\n                      const files = e.target.files\r\n                        ? Array.from(e.target.files)\r\n                        : [];\r\n                      handleChange(field.name, files);\r\n                    }}\r\n                    className=\"w-full text-sm text-gray-500 border rounded-lg p-2\r\n                 file:mr-4 file:py-1 file:px-3 file:rounded-md\r\n                 file:border-0 file:text-sm file:font-semibold\r\n                 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\r\n                  />\r\n\r\n                  {Array.isArray(form[field.name]) &&\r\n                    form[field.name].length > 0 && (\r\n                      <ul className=\"mt-2 space-y-1\">\r\n                        {form[field.name].map((file: File, index: number) => (\r\n                          <li\r\n                            key={index}\r\n                            className=\"text-xs text-blue-600 flex items-center gap-1\"\r\n                          >\r\n                            <span className=\"truncate max-w-[200px]\">\r\n                              üìÑ {file.name}\r\n                            </span>\r\n                            <span className=\"text-gray-400\">\r\n                              ({(file.size / 1024).toFixed(1)} KB)\r\n                            </span>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    )}\r\n                </div>\r\n              ) : (\r\n                <input\r\n                  type={field.type}\r\n                  value={form[field.name] ?? \"\"}\r\n                  disabled={isEdit && field.disabledOnEdit}\r\n                  onChange={(e) => handleChange(field.name, e.target.value)}\r\n                  className=\"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-(--primary-color)\"\r\n                />\r\n              )}\r\n            </div>\r\n          ))}\r\n\r\n          <button className=\"w-full mt-4 bg-(--primary-color) text-white py-2 rounded-lg font-medium hover:opacity-90\">\r\n            {isEdit ? schema.submitEditLabel : schema.submitCreateLabel}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","type FieldType = \"text\" | \"email\" | \"password\" | \"select\" | \"date\" | \"multiselect\" | \"file\";\r\n\r\ninterface FieldSchema {\r\n  name: string\r\n  label: string\r\n  type: FieldType\r\n  options?: { value: any; label: string }[]\r\n  disabledOnEdit?: boolean\r\n}\r\n\r\nexport interface ModalSchema {\r\n  titleCreate: string\r\n  titleEdit: string\r\n  submitCreateLabel: string\r\n  submitEditLabel: string\r\n  fields: FieldSchema[]\r\n}\r\n\r\n//admin\r\nexport const userModalSchema: ModalSchema = {\r\n  titleCreate: \"Crear usuario\",\r\n  titleEdit: \"Editar usuario\",\r\n  submitCreateLabel: \"Crear usuario\",\r\n  submitEditLabel: \"Actualizar usuario\",\r\n  fields: [\r\n    { name: \"name\", label: \"Nombre *\", type: \"text\" },\r\n    { name: \"id_document\", label: \"Documento *\", type: \"text\" },\r\n    {\r\n      name: \"id_role\",\r\n      label: \"Rol *\",\r\n      type: \"select\",\r\n    },\r\n    { name: \"email\", label: \"Email *\", type: \"email\" },\r\n    { name: \"password\", label: \"Contrase√±a *\", type: \"password\" },\r\n    {\r\n      name: \"program\",\r\n      label: \"Programa *\",\r\n      type: \"select\",\r\n    },\r\n    {\r\n      name: \"id_status\",\r\n      label: \"Estado *\",\r\n      type: \"select\",\r\n    },\r\n    {\r\n      name: \"id_school\",\r\n      label: \"Escuela *\",\r\n      type: \"select\",\r\n    },\r\n  ],\r\n}\r\n\r\nexport const schoolModalSchema: ModalSchema = {\r\n  titleCreate: \"Crear escuela\",\r\n  titleEdit: \"Editar escuela\",\r\n  submitCreateLabel: \"Crear\",\r\n  submitEditLabel: \"Actualizar\",\r\n  fields: [{ name: \"name\", label: \"Nombre *\", type: \"text\" }],\r\n}\r\n\r\nexport const programModalSchema: ModalSchema = {\r\n  titleCreate: \"Crear programa\",\r\n  titleEdit: \"Editar programa\",\r\n  submitCreateLabel: \"Crear\",\r\n  submitEditLabel: \"Actualizar\",\r\n  fields: [\r\n    { name: \"name\", label: \"Nombre *\", type: \"text\" },\r\n    {\r\n      name: \"id_school\",\r\n      label: \"Escuela *\",\r\n      type: \"select\",\r\n    },\r\n  ],\r\n}\r\n\r\n//manager\r\nexport const statusUserModalSchema: ModalSchema = {\r\n  titleCreate: \"Actualizar estatus del usuario\",\r\n  titleEdit: \"Actualizar estado del estudiante\",\r\n  submitCreateLabel: \"Crear\",\r\n  submitEditLabel: \"Actualizar\",\r\n  fields: [\r\n    {\r\n      name: \"id_status\",\r\n      label: \"Estatus\",\r\n      type: \"select\",\r\n    },\r\n  ],\r\n}\r\n\r\nexport const projectModalSchema: ModalSchema = {\r\n  titleCreate: \"Crear proyecto\",\r\n  titleEdit: \"Editar proyecto\",\r\n  submitCreateLabel: \"Crear proyecto\",\r\n  submitEditLabel: \"Actualizar proyecto\",\r\n  fields: [\r\n    { name: \"title\", label: \"Nombre *\", type: \"text\" },\r\n    { name: \"description\", label: \"Descripci√≥n *\", type: \"text\" },\r\n    { name: \"is_best\", label: \"Gran proyecto\", type: \"text\" },\r\n    {\r\n      name: \"id_program\",\r\n      label: \"Programa *\",\r\n      type: \"select\",\r\n    },\r\n    {\r\n      name: \"id_school\",\r\n      label: \"Escuela *\",\r\n      type: \"select\",\r\n    },\r\n    {\r\n      name: \"id_mode\",\r\n      label: \"tipo de proyecto *\",\r\n      type: \"select\",\r\n    },\r\n    {\r\n      name: \"initial_date\",\r\n      label: \"Fecha inicial *\",\r\n      type: \"date\",\r\n    },\r\n    {\r\n      name: \"id_professors *\",\r\n      label: \"Profesores\",\r\n      type: \"multiselect\",\r\n    },\r\n    {\r\n      name: \"id_students *\",\r\n      label: \"Estudiantes\",\r\n      type: \"multiselect\",\r\n    },\r\n  ],\r\n}\r\n\r\nexport const phaseModalSchema: ModalSchema = {\r\n  titleCreate: \"Actualizar fase del proyecto\",\r\n  titleEdit: \"Actualizar fase del proyecto\",\r\n  submitCreateLabel: \"Actualizar proyecto\",\r\n  submitEditLabel: \"Actualizar proyecto\",\r\n  fields: [\r\n    {\r\n      name: \"id_work *\",\r\n      label: \"titulo del proyecto\",\r\n      type: \"select\",\r\n    },\r\n    {\r\n      name: \"id_phase *\",\r\n      label: \"Fase\",\r\n      type: \"select\",\r\n    },\r\n    {\r\n      name: \"initial_date *\",\r\n      label: \"Fecha inicial\",\r\n      type: \"date\",\r\n    },\r\n    {\r\n      name: \"id_professors *\",\r\n      label: \"Profesores\",\r\n      type: \"multiselect\",\r\n    },\r\n    {\r\n      name: \"id_students *\",\r\n      label: \"Estudiantes\",\r\n      type: \"multiselect\",\r\n    },\r\n  ],\r\n}\r\n\r\nexport const phaseProjectDateModalSchema: ModalSchema = {\r\n  titleCreate: \"Actualizar fecha fin\",\r\n  titleEdit: \"Actualizar fecha fin\",\r\n  submitCreateLabel: \"Actualizar fecha\",\r\n  submitEditLabel: \"Actualizar\",\r\n  fields: [\r\n    {\r\n      name: \"id_work *\",\r\n      label: \"titulo del proyecto\",\r\n      type: \"select\",\r\n    },\r\n    {\r\n      name: \"id_phase *\",\r\n      label: \"Fase del proyecto\",\r\n      type: \"select\",\r\n    },\r\n    {\r\n      name: \"end_date *\",\r\n      label: \"Fin de la fase\",\r\n      type: \"date\",\r\n    },\r\n  ],\r\n}\r\n\r\nexport const studentAdvanceModalSchema: ModalSchema = {\r\n  titleCreate: \"Nuevo avance\",\r\n  titleEdit: \"Editar avance\",\r\n  submitCreateLabel: \"Subir avance\",\r\n  submitEditLabel: \"Actualizar\",\r\n  fields: [\r\n    {\r\n      name: \"file\",\r\n      label: \"Archivo word o excel *\",\r\n      type: \"file\",\r\n    },\r\n    {\r\n      name: \"version\",\r\n      label: \"version *\",\r\n      type: \"text\",\r\n    },\r\n    {\r\n      name: \"description\",\r\n      label: \"Descripci√≥n\",\r\n      type: \"text\",\r\n    },\r\n  ],\r\n};\r\n\r\nexport const professorFeedbackModalSchema: ModalSchema = {\r\n  titleCreate: \"Nuevo avance\",\r\n  titleEdit: \"Editar avance\",\r\n  submitCreateLabel: \"Subir avance\",\r\n  submitEditLabel: \"Actualizar\",\r\n  fields: [\r\n    {\r\n      name: \"file\",\r\n      label: \"Archivo word o excel *\",\r\n      type: \"file\",\r\n    },\r\n    {\r\n      name: \"professor_comments\",\r\n      label: \"Comentarios del profesor\",\r\n      type: \"text\",\r\n    },\r\n  ],\r\n};","/* __next_internal_action_entry_do_not_use__ [{\"40df1140757c877a0cf5908cbf3501a791abd968f4\":\"insertDataStudent\"},\"src/lib/actions/student/action.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var insertDataStudent=/*#__PURE__*/createServerReference(\"40df1140757c877a0cf5908cbf3501a791abd968f4\",callServer,void 0,findSourceMapURL,\"insertDataStudent\");","/* __next_internal_action_entry_do_not_use__ [{\"4023375bd8a23baae2dbdd008432443971914172c5\":\"updateDataProfessor\"},\"src/lib/actions/professor/action.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var updateDataProfessor=/*#__PURE__*/createServerReference(\"4023375bd8a23baae2dbdd008432443971914172c5\",callServer,void 0,findSourceMapURL,\"updateDataProfessor\");","/* __next_internal_action_entry_do_not_use__ [{\"603f537fdc2a97a1500ac983e263e983cb53542d1f\":\"insertData\"},\"src/lib/actions/admin/action.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var insertData=/*#__PURE__*/createServerReference(\"603f537fdc2a97a1500ac983e263e983cb53542d1f\",callServer,void 0,findSourceMapURL,\"insertData\");","/* __next_internal_action_entry_do_not_use__ [{\"789356f77ab1b0865bf38f9fb0beb43681a836e7c7\":\"updateData\"},\"src/lib/actions/admin/action.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var updateData=/*#__PURE__*/createServerReference(\"789356f77ab1b0865bf38f9fb0beb43681a836e7c7\",callServer,void 0,findSourceMapURL,\"updateData\");","import {\r\n  userModalSchema,\r\n  schoolModalSchema,\r\n  programModalSchema,\r\n  projectModalSchema,\r\n  phaseProjectDateModalSchema,\r\n  statusUserModalSchema,\r\n  phaseModalSchema,\r\n  studentAdvanceModalSchema,\r\n  professorFeedbackModalSchema\r\n} from \"./schemas\"\r\n\r\nimport { insertDataStudent } from \"@/src/lib/actions/student/action\";\r\nimport { updateDataProfessor} from \"@/src/lib/actions/professor/action\";\r\nimport { insertData, updateData, getData } from \"@/src/lib/actions/admin/action\"\r\nimport { createProject, updatePhaseProject, updatePhaseProjectDate, updateProject, updateUserStatus, getCustomData } from \"@/src/lib/actions/manager/action\"\r\n\r\nexport const tableConfig: any = {\r\n  users: {\r\n    schema: userModalSchema,\r\n    createAction: async (table_name: string, data: Map<any, any>) => {\r\n      insertData(table_name, data)\r\n    },\r\n    updateAction: async (table_name: string, data: Map<any, any>, id: number) => {\r\n      updateData(table_name, data, id, 'id_user');\r\n    },\r\n    loadRelations: async () => {\r\n      const roles = await getData(\"roles\")\r\n      const programs = await getData(\"programs\")\r\n      const status_user = await getData(\"status_user\")\r\n      const schools = await getData(\"schools\")\r\n      return {\r\n        roles: roles,\r\n        programs: programs,\r\n        status: status_user,\r\n        schools: schools\r\n      }\r\n    },\r\n  },\r\n\r\n  schools: {\r\n    schema: schoolModalSchema,\r\n    createAction: async (table_name: string, data: Map<any, any>) => {\r\n      insertData(table_name, data)\r\n    },\r\n    updateAction: async (table_name: string, data: Map<any, any>, id: number) => {\r\n      updateData(table_name, data, id, 'id_school');\r\n    }\r\n  },\r\n\r\n  programs: {\r\n    schema: programModalSchema,\r\n    createAction: async (table_name: string, data: Map<any, any>) => {\r\n      insertData(table_name, data)\r\n    },\r\n    updateAction: async (table_name: string, data: Map<any, any>, id: number) => {\r\n      updateData(table_name, data, id, 'id_program');\r\n    },\r\n    loadRelations: async () => {\r\n      const schools = await getData(\"schools\")\r\n      return {\r\n        schools: schools\r\n      }\r\n    },\r\n\r\n  },\r\n\r\n  Project: {\r\n    schema: projectModalSchema,\r\n    createAction: async (data: Map<any, any>) => {\r\n      createProject(data)\r\n    },\r\n    updateAction: async (data: Map<any, any>, id: number) => {\r\n      updateProject(data, id);\r\n    },\r\n    loadRelations: async (school_id: number) => {\r\n      const schools = await getCustomData('schools','*',school_id);\r\n      const programs = await getCustomData('programs','id_program, name',school_id);\r\n      const mode = await getCustomData('modes');\r\n      const students = await getCustomData('users', 'id_user, name', school_id,4);\r\n      const professors = await getCustomData('users', 'id_user, name', school_id,3);\r\n      return {\r\n        schools:schools,\r\n        programs: programs,\r\n        mode: mode,\r\n        students: students,\r\n        professors: professors\r\n      }\r\n    }\r\n  },\r\n\r\n  usersManager:{\r\n    schema: statusUserModalSchema,\r\n    updateAction: async (status: number) => {\r\n      updateUserStatus(status);\r\n    },\r\n    loadRelations: async () => {\r\n      const estatus = await getCustomData(\"status_user\")\r\n      return {\r\n        status: estatus\r\n      }\r\n    },\r\n  },\r\n\r\n  newPhase:{\r\n    schema: phaseModalSchema,\r\n    createAction: async (data: Map<any, any>) => {\r\n      updatePhaseProject(data);\r\n    },\r\n    loadRelations: async (school_id: number) => {\r\n      const phase = await getCustomData('phase');\r\n      const works = await getCustomData('works','id_work, title',school_id);\r\n      const students = await getCustomData('users', 'id_user, name', school_id,4);\r\n      const professors = await getCustomData('users', 'id_user, name', school_id,3);\r\n      return {\r\n        phase: phase,\r\n        works: works,\r\n        students: students,\r\n        professors: professors\r\n      }\r\n    }\r\n  },\r\n\r\n  datePhase:{\r\n    schema: phaseProjectDateModalSchema,\r\n    createAction: async (data: Map<any, any>) => {\r\n      updatePhaseProjectDate(data);\r\n    },\r\n    loadRelations: async (school_id: number) => {\r\n      const phase = await getCustomData('phase');\r\n      const works = await getCustomData('works','id_work, title',school_id);\r\n      return {\r\n        phase: phase,\r\n        works: works\r\n      }\r\n    }\r\n  },\r\n\r\n  studentAdvance: {\r\n    schema: studentAdvanceModalSchema,\r\n    createAction: async (formData: FormData) => {\r\n      await insertDataStudent(formData);\r\n    },\r\n  },\r\n\r\n  professorFeedback: {\r\n    schema: professorFeedbackModalSchema,\r\n    updateAction: async (formData: FormData) => {\r\n      await updateDataProfessor(formData);\r\n    },\r\n  }\r\n}\r\n","/* __next_internal_action_entry_do_not_use__ [{\"402620dffcd3c85786e3b09cbf5845ddde39a9ce98\":\"createProject\"},\"src/lib/actions/manager/action.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var createProject=/*#__PURE__*/createServerReference(\"402620dffcd3c85786e3b09cbf5845ddde39a9ce98\",callServer,void 0,findSourceMapURL,\"createProject\");","/* __next_internal_action_entry_do_not_use__ [{\"40125bccffa017b42e903c0dcaad09bf605e682708\":\"updatePhaseProject\"},\"src/lib/actions/manager/action.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var updatePhaseProject=/*#__PURE__*/createServerReference(\"40125bccffa017b42e903c0dcaad09bf605e682708\",callServer,void 0,findSourceMapURL,\"updatePhaseProject\");","/* __next_internal_action_entry_do_not_use__ [{\"404c6d4fcb17c8ca1923809c46ed86bb2511a6522c\":\"updatePhaseProjectDate\"},\"src/lib/actions/manager/action.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var updatePhaseProjectDate=/*#__PURE__*/createServerReference(\"404c6d4fcb17c8ca1923809c46ed86bb2511a6522c\",callServer,void 0,findSourceMapURL,\"updatePhaseProjectDate\");","/* __next_internal_action_entry_do_not_use__ [{\"60095e3d4e4173083ded4e8a12e6c7ddd48913e0d1\":\"updateProject\"},\"src/lib/actions/manager/action.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var updateProject=/*#__PURE__*/createServerReference(\"60095e3d4e4173083ded4e8a12e6c7ddd48913e0d1\",callServer,void 0,findSourceMapURL,\"updateProject\");","/* __next_internal_action_entry_do_not_use__ [{\"40bc103f492b054c2a0e26064e9bcd8274593ac6c1\":\"updateUserStatus\"},\"src/lib/actions/manager/action.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var updateUserStatus=/*#__PURE__*/createServerReference(\"40bc103f492b054c2a0e26064e9bcd8274593ac6c1\",callServer,void 0,findSourceMapURL,\"updateUserStatus\");","/* __next_internal_action_entry_do_not_use__ [{\"7899d074825ab2fdb144caec3875c5e99aea2a7fa3\":\"getCustomData\"},\"src/lib/actions/manager/action.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var getCustomData=/*#__PURE__*/createServerReference(\"7899d074825ab2fdb144caec3875c5e99aea2a7fa3\",callServer,void 0,findSourceMapURL,\"getCustomData\");","\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport JSZip from \"jszip\";\r\nimport {\r\n  IoDownloadOutline,\r\n  IoSearchOutline,\r\n  IoChatbubbleEllipsesOutline,\r\n} from \"react-icons/io5\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { GenericCrudModal } from \"../data-modal\";\r\nimport { tableConfig } from \"@/src/lib/definitions/table-config\";\r\nimport { formatDate, getLastDocument } from \"@/src/lib/utils\";\r\nimport {\r\n  getData,\r\n  getStudentsDetails,\r\n} from \"@/src/lib/actions/professor/action\";\r\nimport { useAuth } from \"@/src/lib/context/AuthContext\";\r\n\r\nexport default function EditData() {\r\n  const { user } = useAuth();\r\n  const [data, setData] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const [selectedWork, setSelectedWork] = useState<any>(null);\r\n  const [schema, setSchema] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    load();\r\n    setupSchema();\r\n  }, [user]);\r\n\r\n  async function load() {\r\n    if (!user?.id_user) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      const works: any[] = await getData(\r\n        \"works\",\r\n        \"id_work, title, description, id_students, modes(name), work_documents(id_work_documents, version, description, upload_date, document_paths, professor_comments, document_professor_paths)\",\r\n        user.id_user,\r\n      );\r\n      const allStudentIds = [...new Set(works.flatMap((w) => w.id_students))];\r\n      if (allStudentIds.length > 0) {\r\n        const studentsInfo = await getStudentsDetails(allStudentIds);\r\n        const enrichedWorks = works.map((work) => ({\r\n          ...work,\r\n          work_documents: Array.isArray(work.work_documents)\r\n            ? work.work_documents.sort(\r\n                (a: any, b: any) =>\r\n                  new Date(b.upload_date).getTime() -\r\n                  new Date(a.upload_date).getTime(),\r\n              )\r\n            : [],\r\n          students: studentsInfo.filter((s) =>\r\n            work.id_students.includes(s.id_user),\r\n          ),\r\n        }));\r\n        setData(enrichedWorks);\r\n      } else {\r\n        setData(works);\r\n      }\r\n    } catch (error) {\r\n      setData([]);\r\n    }\r\n    setLoading(false);\r\n  }\r\n\r\n  const filteredData = data.filter(\r\n    (item) =>\r\n      item.title?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      item.description?.toLowerCase().includes(searchTerm.toLowerCase()),\r\n  );\r\n\r\n  async function setupSchema() {\r\n    const config = tableConfig[\"professorFeedback\"];\r\n    if (!config || !user?.id_user) return;\r\n    let schemaCopy = structuredClone(config.schema);\r\n    setSchema(schemaCopy);\r\n  }\r\n\r\n  const handleOpenModal = (row: any) => {\r\n    setSelectedWork(row);\r\n    setOpenModal(true);\r\n  };\r\n\r\n  const handleSubmit = async (formValues: any) => {\r\n    const config = tableConfig[\"professorFeedback\"];\r\n    try {\r\n      const formData = new FormData();\r\n      const lastDoc = selectedWork.work_documents?.[0];\r\n      if (lastDoc) {\r\n        formData.append(\"id_work_documents\", String(lastDoc.id_work_documents));\r\n      }\r\n      formData.append(\r\n        \"professor_comments\",\r\n        formValues.professor_comments || \"\",\r\n      );\r\n\r\n      if (formValues.file) {\r\n        const file =\r\n          formValues.file instanceof File\r\n            ? formValues.file\r\n            : formValues.file[0];\r\n        formData.append(\"files\", file);\r\n      }\r\n\r\n      await config.updateAction(formData);\r\n      setOpenModal(false);\r\n      await load();\r\n    } catch (error) {\r\n      console.error(\"Error al procesar\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-7 gap-4\">\r\n        <h2 className=\"text-3xl font-bold text-gray-800\">Dashboard Profesor</h2>\r\n        <div className=\"relative w-full md:w-80\">\r\n          <IoSearchOutline className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Buscar proyecto...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 border rounded-xl text-sm\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-2xl shadow-sm border p-4 md:p-6\">\r\n        <div className=\"flex flex-col gap-6\">\r\n          <div className=\"relative h-[60vh] md:h-[65vh]\">\r\n            {loading ? (\r\n              <div className=\"flex items-center justify-center h-full text-gray-500\">\r\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3\"></div>\r\n                Cargando datos del proyecto\r\n              </div>\r\n            ) : (\r\n              <Table data={filteredData} onAction={handleOpenModal} />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {schema && openModal && (\r\n        <GenericCrudModal\r\n          open={openModal}\r\n          onClose={() => setOpenModal(false)}\r\n          schema={schema}\r\n          onSubmit={handleSubmit}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Table({\r\n  data,\r\n  onAction,\r\n}: {\r\n  data: any[];\r\n  onAction: (row: any) => void;\r\n}) {\r\n  if (!data || data.length === 0) {\r\n    return (\r\n      <div className=\"py-20 text-center text-gray-400 font-medium\">\r\n        No se encontraron registros.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleDownloadZip = async (\r\n    urls: string[],\r\n    version: string | number,\r\n  ) => {\r\n    const zip = new JSZip();\r\n    const folder = zip.folder(`archivos-profesor-v${version}`);\r\n\r\n    const downloadPromises = urls.map(async (url, index) => {\r\n      const response = await fetch(url);\r\n      const blob = await response.blob();\r\n      const fileName =\r\n        url.split(\"/\").pop()?.split(\"?\")[0] || `archivo-${index}`;\r\n      folder?.file(fileName, blob);\r\n    });\r\n\r\n    await Promise.all(downloadPromises);\r\n    const content = await zip.generateAsync({ type: \"blob\" });\r\n    saveAs(content, `revision-profesor-v${version}.zip`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"overflow-x-auto\">\r\n      <table className=\"w-full text-left border-separate border-spacing-0\">\r\n        <thead>\r\n          <tr className=\"bg-gray-50\">\r\n            <th className=\"px-6 py-4 text-xs font-semibold text-gray-500 border-b\">\r\n              Proyecto\r\n            </th>\r\n            <th className=\"px-6 py-4 text-xs font-semibold text-gray-500 border-b\">\r\n              Estudiantes\r\n            </th>\r\n            <th className=\"px-6 py-4 text-xs font-semibold text-gray-500 border-b\">\r\n              Emails\r\n            </th>\r\n            <th className=\"px-6 py-4 text-xs font-semibold text-gray-500 border-b\">\r\n              Modo\r\n            </th>\r\n            <th className=\"px-6 py-4 text-xs font-semibold text-gray-500 border-b\">\r\n              Fecha subida\r\n            </th>\r\n            <th className=\"px-6 py-4 text-xs font-semibold text-gray-500 border-b\">\r\n              Archivos\r\n            </th>\r\n            <th className=\"px-6 py-4 text-xs font-semibold text-gray-500 border-b text-right\">\r\n              Acci√≥n\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody className=\"divide-y divide-gray-100\">\r\n          {data.map((row, i) => {\r\n            const lastDoc = getLastDocument(row.work_documents);\r\n            const hasSubmission = !!lastDoc;\r\n\r\n            const hasProfessorResponse =\r\n              !!lastDoc &&\r\n              ((lastDoc.professor_comments &&\r\n                lastDoc.professor_comments.trim() !== \"\") ||\r\n                (Array.isArray(lastDoc.document_professor_paths) &&\r\n                  lastDoc.document_professor_paths.length > 0));\r\n\r\n            return (\r\n              <tr\r\n                key={i}\r\n                className={`transition-colors ${\r\n                  hasProfessorResponse ? \"bg-green-50\" : \"bg-red-50\"\r\n                }`}\r\n              >\r\n                <td className=\"px-6 py-4 text-sm font-medium\">{row.title}</td>\r\n\r\n                <td className=\"px-6 py-4 text-sm\">\r\n                  {row.students?.map((s: any) => s.name).join(\", \") || \"-\"}\r\n                </td>\r\n\r\n                <td className=\"px-6 py-4 text-sm text-gray-600\">\r\n                  {row.students?.map((s: any) => s.email).join(\", \") || \"-\"}\r\n                </td>\r\n\r\n                <td className=\"px-6 py-4 text-sm\">{row.modes?.name || \"-\"}</td>\r\n\r\n                <td className=\"px-6 py-4 text-sm\">\r\n                  {formatDate(lastDoc?.upload_date)}\r\n                </td>\r\n\r\n                <td className=\"px-6 py-4 text-sm\">\r\n                  {hasSubmission ? (\r\n                    <button\r\n                      onClick={() =>\r\n                        handleDownloadZip(\r\n                          lastDoc.document_paths,\r\n                          lastDoc.version,\r\n                        )\r\n                      }\r\n                      className=\"flex items-center gap-2 px-3 py-1.5 bg-green-50 text-green-700 border border-green-200 rounded-lg text-xs\"\r\n                    >\r\n                      <IoDownloadOutline size={16} />\r\n                      Descargar ZIP\r\n                    </button>\r\n                  ) : (\r\n                    <span className=\"text-gray-400 italic\">Sin archivos</span>\r\n                  )}\r\n                </td>\r\n\r\n                <td className=\"px-6 py-4 text-right\">\r\n                  <button\r\n                    onClick={() => onAction(row)}\r\n                    className=\"inline-flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-xs font-medium\"\r\n                  >\r\n                    <IoChatbubbleEllipsesOutline size={16} />\r\n                    Feedback\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n","/* __next_internal_action_entry_do_not_use__ [{\"7067efb95fb57b3e3a2940159955556052fe646855\":\"getData\"},\"src/lib/actions/professor/action.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var getData=/*#__PURE__*/createServerReference(\"7067efb95fb57b3e3a2940159955556052fe646855\",callServer,void 0,findSourceMapURL,\"getData\");","/* __next_internal_action_entry_do_not_use__ [{\"401d31679b75714ae4424928917c2ac71275ce4008\":\"getStudentsDetails\"},\"src/lib/actions/professor/action.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var getStudentsDetails=/*#__PURE__*/createServerReference(\"401d31679b75714ae4424928917c2ac71275ce4008\",callServer,void 0,findSourceMapURL,\"getStudentsDetails\");"],"names":["callServer","createServerReference","findSourceMapURL"],"mappings":"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","ignoreList":[1]}