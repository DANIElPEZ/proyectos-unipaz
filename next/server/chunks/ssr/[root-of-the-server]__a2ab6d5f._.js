module.exports=[75343,(a,b,c)=>{b.exports=a.x("bcrypt",()=>require("bcrypt"))},72847,a=>{"use strict";var b=a.i(37936),c=a.i(64841),d=a.i(75343);async function e(a){let{data:b,error:d}=await c.supabase.from(a).select("*");if(d)throw Error(d.message);return b??[]}async function f(a,b,e,f){"users"===a&&b.password&&(b.password=await d.default.hash(b.password,10));let{error:g}=await c.supabase.from(a).update(b).eq(f,e);if(g)throw Error(g.message)}async function g(a,b){"users"===a&&b.password&&(b.password=await d.default.hash(b.password,10));let{error:e}=await c.supabase.from(a).insert(b);if(e)throw Error(e.message)}(0,a.i(13095).ensureServerEntryExports)([e,f,g]),(0,b.registerServerReference)(e,"40dbeeb162e059ce773ea6d9a6027e012cc9ed5594",null),(0,b.registerServerReference)(f,"789356f77ab1b0865bf38f9fb0beb43681a836e7c7",null),(0,b.registerServerReference)(g,"603f537fdc2a97a1500ac983e263e983cb53542d1f",null),a.s(["getData",()=>e,"insertData",()=>g,"updateData",()=>f])},35e3,10819,84816,a=>{"use strict";var b=a.i(37936),c=a.i(64841),d=a.i(13095);async function e(a,b,d,e){let f=c.supabase.from(a).select(b);void 0!==d&&(f=f.contains("id_students",[d])),void 0!==e&&(f=f.eq("id_work",e));let{data:g,error:h}=await f;if(h)throw Error(h.message);return g??[]}async function f(a){let b=a.getAll("files"),d=Number(a.get("id_work")),e=Number(a.get("version")),f=a.get("description");if(0===b.length||isNaN(d))throw Error("Faltan datos");let g=await Promise.all(b.map(async a=>{let b=a.name.split(".").pop(),e=`avance-${d}-${Date.now()}-${Math.random().toString(36).substring(7)}.${b}`,{error:f}=await c.supabase.storage.from("documents").upload(e,a);if(f)throw f;let{data:g}=c.supabase.storage.from("documents").getPublicUrl(e);if(!g?.publicUrl)throw Error("Error al obtener la URL pública");return g.publicUrl})),{error:h}=await c.supabase.from("work_documents").insert({id_work:d,version:e,description:f,document_paths:g});if(h||h)throw h}async function g(a,b,d){let e=c.supabase.from(a).select(b);void 0!==d&&(e=e.contains("id_professors",[d]));let{data:f,error:g}=await e;if(g)throw Error(g.message);return f??[]}async function h(a){let{data:b,error:d}=await c.supabase.from("users").select("id_user, name, email").in("id_user",a);if(d)throw d;return b}async function i(a){let b=Number(a.get("id_work_documents")),d=a.get("professor_comments"),e=a.getAll("files");if(0===e.length||isNaN(b))throw Error("Faltan datos");let f=await Promise.all(e.map(async a=>{let d=a.name.split(".").pop(),e=`avance-${b}-${Date.now()}-${Math.random().toString(36).substring(7)}.${d}`,{error:f}=await c.supabase.storage.from("documents").upload(e,a);if(f)throw f;let{data:g}=c.supabase.storage.from("documents").getPublicUrl(e);if(!g?.publicUrl)throw Error("Error al obtener la URL pública");return g.publicUrl})),{error:g}=await c.supabase.from("work_documents").update({professor_comments:d,document_professor_paths:f}).eq("id_work_documents",b);if(g||g)throw g}async function j(a,b="*",d,e){let f=c.supabase.from(a).select(b);void 0!==d&&(f=f.eq("id_school",d)),void 0!==e&&(f=f.eq("id_role",e));let{data:g,error:h}=await f;if(h)throw Error(h.message);return g??[]}async function k(a){let{error:b}=await c.supabase.from("users").update({id_status:a.id_status}).eq("id_user",a.id_user);if(b)throw Error(b.message)}async function l(a){let b={...a,id_program:Number(a.id_program),id_school:Number(a.id_school),id_mode:Number(a.id_mode)},{data:d,error:e}=await c.supabase.from("works").insert(b).select();if(e)throw Error(e.message);await c.supabase.from("phase_work").insert({id_phase:1,id_work:d[0].id_work,initial_date:a.initial_date,id_students:d[0].id_students,id_professors:d[0].id_professors})}async function m(a,b){let{error:d}=await c.supabase.from("works").update(a).eq("id_work",b);if(d)throw Error(d.message)}async function n(a){console.log(a);let{error:b}=await c.supabase.from("phase_work").update({end_date:a.end_date}).eq("id_work",a.id_work).eq("id_phase",a.id_phase);if(b)throw Error(b.message)}async function o(a){let b={...a,id_work:Number(a.id_work),id_phase:Number(a.id_phase)},{error:d}=await c.supabase.from("phase_work").insert(b);if(d)throw Error(d.message);await c.supabase.from("works").update({id_students:a.id_students,id_professors:a.id_professors}).eq("id_work",a.id_work)}(0,d.ensureServerEntryExports)([e,f]),(0,b.registerServerReference)(e,"78638fc83f544890cd09b72018dea6351a18b59af5",null),(0,b.registerServerReference)(f,"40df1140757c877a0cf5908cbf3501a791abd968f4",null),a.s(["getData",()=>e,"insertDataStudent",()=>f],35e3),(0,d.ensureServerEntryExports)([g,h,i]),(0,b.registerServerReference)(g,"7067efb95fb57b3e3a2940159955556052fe646855",null),(0,b.registerServerReference)(h,"401d31679b75714ae4424928917c2ac71275ce4008",null),(0,b.registerServerReference)(i,"4023375bd8a23baae2dbdd008432443971914172c5",null),a.s(["getData",()=>g,"getStudentsDetails",()=>h,"updateDataProfessor",()=>i],10819),(0,d.ensureServerEntryExports)([j,k,l,m,n,o]),(0,b.registerServerReference)(j,"7899d074825ab2fdb144caec3875c5e99aea2a7fa3",null),(0,b.registerServerReference)(k,"40bc103f492b054c2a0e26064e9bcd8274593ac6c1",null),(0,b.registerServerReference)(l,"402620dffcd3c85786e3b09cbf5845ddde39a9ce98",null),(0,b.registerServerReference)(m,"60095e3d4e4173083ded4e8a12e6c7ddd48913e0d1",null),(0,b.registerServerReference)(n,"404c6d4fcb17c8ca1923809c46ed86bb2511a6522c",null),(0,b.registerServerReference)(o,"40125bccffa017b42e903c0dcaad09bf605e682708",null),a.s(["createProject",()=>l,"getCustomData",()=>j,"updatePhaseProject",()=>o,"updatePhaseProjectDate",()=>n,"updateProject",()=>m,"updateUserStatus",()=>k],84816)},85002,a=>{"use strict";var b=a.i(35e3),c=a.i(10819),d=a.i(72847),e=a.i(84816);a.s([],37396),a.i(37396),a.s(["40125bccffa017b42e903c0dcaad09bf605e682708",()=>e.updatePhaseProject,"401d31679b75714ae4424928917c2ac71275ce4008",()=>c.getStudentsDetails,"4023375bd8a23baae2dbdd008432443971914172c5",()=>c.updateDataProfessor,"402620dffcd3c85786e3b09cbf5845ddde39a9ce98",()=>e.createProject,"404c6d4fcb17c8ca1923809c46ed86bb2511a6522c",()=>e.updatePhaseProjectDate,"40bc103f492b054c2a0e26064e9bcd8274593ac6c1",()=>e.updateUserStatus,"40dbeeb162e059ce773ea6d9a6027e012cc9ed5594",()=>d.getData,"40df1140757c877a0cf5908cbf3501a791abd968f4",()=>b.insertDataStudent,"60095e3d4e4173083ded4e8a12e6c7ddd48913e0d1",()=>e.updateProject,"603f537fdc2a97a1500ac983e263e983cb53542d1f",()=>d.insertData,"7067efb95fb57b3e3a2940159955556052fe646855",()=>c.getData,"789356f77ab1b0865bf38f9fb0beb43681a836e7c7",()=>d.updateData,"7899d074825ab2fdb144caec3875c5e99aea2a7fa3",()=>e.getCustomData],85002)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a2ab6d5f._.js.map