module.exports=[75343,(a,b,c)=>{b.exports=a.x("bcrypt",()=>require("bcrypt"))},39138,a=>{"use strict";function b(a){return/^[0-9]+$/.test(a.toString())}function c(a){return/^[a-zA-Z0-9!@#$%^&*()_\-+=\[\]{}|\\:;"'<>,.?/]+$/.test(a)}a.s(["validatePassword",()=>c,"validateUser",()=>b])},81274,a=>{"use strict";var b=a.i(37936),c=a.i(64841),d=a.i(39138),e=a.i(75343);async function f(a,b){if(!(0,d.validatePassword)(a))throw Error("Contraseña invalida");let f=await e.default.hash(a,10),{error:g}=await c.supabase.from("users").update({password:f}).eq("id_user",b);if(g)throw Error(g.message)}async function g(a){let b=a.get("file"),d=Number(a.get("userId"));if(!b||!d)throw Error("Datos inválidos");let e=b.name.split(".").pop(),f=`avatar-${d}-${Date.now()}.${e}`,{error:g}=await c.supabase.storage.from("profiles").upload(f,b,{upsert:!0,contentType:b.type});if(g)throw g;let{data:h}=c.supabase.storage.from("profiles").getPublicUrl(f),i=h.publicUrl,{error:j}=await c.supabase.from("users").update({photo:i}).eq("id_user",d);if(j)throw j;return i}(0,a.i(13095).ensureServerEntryExports)([f,g]),(0,b.registerServerReference)(f,"607ed4d0847bb47d9fdd1bef8b99e2d6489fcbd52c",null),(0,b.registerServerReference)(g,"4067b80c92a413be84f8bc0b56d1e5f264eb17f2b1",null),a.s([],91799),a.i(91799),a.s(["4067b80c92a413be84f8bc0b56d1e5f264eb17f2b1",()=>g,"607ed4d0847bb47d9fdd1bef8b99e2d6489fcbd52c",()=>f],81274)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__856dee3e._.js.map